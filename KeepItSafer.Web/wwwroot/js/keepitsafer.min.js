function initialise(){notifyWindow=new Notify;$(".groups div").click(function(){var n=$(this).attr("data-group");console.log("showing group "+n);hideDecryptedPasswords();$('section.group-entries[data-group="'+n+'"]').show();$("section.groups").hide();window.scrollTo(0,0)});$(".group-entries div:first-child a").click(function(){console.log("going back");hideDecryptedPasswords();$("section.group-entries").hide();$("section.groups").show()});$('.group-entry-password input[data-type="encrypted"]').click(function(){(console.log("showing password"),$(this).attr("data-state")!=="decrypted")&&(showModalDialog("some message","warn"),$(this).val("decrypted password"),$(this).attr("data-state","decrypted"),console.log("password decrypted"))});$(".group-entries div:first-child").click(function(){hideDecryptedPasswords()});$("input[data-copy]").click(function(){let n=$(this).attr("data-copy"),t=$(this).parents("div[data-name]").attr("data-name");if(n==="name")copyToClipboard(t);else if(n==="value")copyToClipboard($(this).parents(".group-entry-actions").find(".group-entry-password input").val());else if(n==="encrypted"){let n=$(this).parents(".group-entry-actions").find(".group-entry-password input");if(n.attr("data-state")==="decrypted"){copyToClipboard(n.val());return}showModalDialog("some message: need to decrypt","info")}});$("#modal-background, #modal-close, #modal-content input[value='Cancel']").click(function(){closeModalDialog()});$(document).keydown(function(n){n.keyCode===27&&closeModalDialog()})}function hideDecryptedPasswords(){console.log("hiding any decrypted password");let n=$('.group-entry-password input[data-type="encrypted"]');n.val("***");n.attr("data-state","encrypted")}function fallbackCopyToClipboard(n){let t=document.createElement("textarea");t.value=n;t.style.top="0";t.style.left="0";t.style.position="fixed";document.body.appendChild(t);t.focus();t.select();try{let n=document.execCommand("copy"),t=n?"successful":"unsuccessful"}catch(i){console.error("Unable to copy",i)}document.body.removeChild(t)}function copyToClipboard(n){navigator.clipboard?navigator.clipboard.writeText(n):fallbackCopyToClipboard(n);notifyWindow.show("Copied to clipboard",!0)}function closeModalDialog(){console.log("hiding any current modal dialog");$("#modal-content, #modal-background").removeClass("active")}function showModalDialog(n,t){closeModalDialog();var i=$("#modal-content .modal-content-header");(n||"")===""?i.hide():(i.text(n),i.attr("data-level",t||"info"),i.show());console.log("showing dialog with message "+t+"["+n+"]");$("#modal-content, #modal-background").addClass("active");$("#masterpassword").focus()}function Notify(){var n=this;this._notifyItem=$('<div class="notify"/>');this._showTimeoutId=0;this._notifyItem.hide();$("body").append(this._notifyItem);this.show=function(t,i){n._notifyItem.text(t);n._showTimeoutId===0?(console.log("showing notification"),n._notifyItem.show()):(window.clearTimeout(n._showTimeoutId),n._showTimeoutId=0,console.log("cleared previous timeout "+n._showTimeoutId));i&&(n._showTimeoutId=window.setTimeout(function(){n._close()},3e3))};this.close=function(){n._showTimeoutId=window.setTimeout(function(){n._close()},750)};this._close=function(){console.log("closing notification");n._notifyItem.hide();n._notifyItem.text("");n._showTimeoutId=0}}var notifyWindow;