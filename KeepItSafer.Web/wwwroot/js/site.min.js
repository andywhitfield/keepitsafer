function initialisePasswordGroups(){groups={};groups.groupsSection=$("#PasswordGroups");$("section",groups.groupsSection).children("article").hide();$(".group-section div",groups.groupsSection).click(toggleShowHideGroupItems);$('.password-list input[type="text"]').click(decryptPassword)}function toggleShowHideGroupItems(){var n=$(this);console.log("group clicked: "+n.parent().attr("id"));n.next().toggle();$(window).scrollTop(n.position().top)}function decryptPassword(){var n=$(this);if(n.attr("data-type")=="encrypted"){if(n.attr("data-decrypted")=="true"){n.val("****");n.attr("data-decrypted","false");return}var t=n.parents("li"),i=t.attr("id"),r=t.parents("section").attr("id");console.log("password clicked: "+i+" in group "+r);$.post("/api/decrypt",{group:r,entry:i}).done(function(t){console.log("received decrypt: "+t.decrypted+":"+t.decryptedValue);n.val(t.decryptedValue);n.attr("data-decrypted","true")}).fail(function(){console.log("decrypt failed")})}}var groups;